library(ggplot2)
data <- read.csv("aprAB.csv", header = T, check.names = F)
data$phylum <- factor(data$phylum,levels = c("Proteobacteria","Planctomycetota","SAR324","Acidobacteriota","Chloroflexota","Bacteroidota","Desulfobacterota_D","Desulfobacterota_B","Gemmatimonadota","Thermoproteota","Actinobacteriota","Myxococcota_A","Tectomicrobia","Nitrospirota","Nitrospinota","Methylomirabilota","KSB1","Poribacteria","Latescibacterota","Verrucomicrobiota","Krumholzibacteriota","Myxococcota"))
mycol <- c("#d4a6c8","#f1ce63","#ffbe7d","#4e79a7","#e15759","#8cd17d","#a0cbe8","#fabfd2","#b6992d","#00a98f","#d37295","#b07aa1","#499894","#86bcb6","#f28e2b","#ff9d9a","#9faaa2","#79706e","#d7b5a6","#bab0ac","#59a14f","#9d7660")
p <- ggplot(data, aes(x=gene, y=num, fill=phylum)) + geom_bar(stat = "identity",position ="fill") + scale_fill_manual(values=mycol) + labs(x = "Sample" , y = "Relative abundance(%)") + theme(axis.title=element_text(size=15),axis.text.x = element_text(angle=45, hjust = 1, vjust = 1 ,size = 12),axis.text.y = element_text(size = 12),axis.ticks.length=unit(0.15,"cm") ,panel.background = element_blank(),axis.line = element_line(color = "black"))
ggsave("aprAB.pdf",p,width = 8,height = 8)